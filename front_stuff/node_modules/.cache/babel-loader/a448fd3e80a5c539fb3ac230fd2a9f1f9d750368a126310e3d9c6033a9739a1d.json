{"ast":null,"code":"var _jsxFileName = \"/Users/beddinao/cursus-0/trancendance/new_stuff/front_shit/src/App.js\",\n  _s5 = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nimport './styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar App = () => {\n  _s5();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n  const [socket, setSocket] = useState(null);\n  const [state, setState] = useState(0);\n  const [room_name, setRoom_name] = useState(0);\n  const [message, setMessage] = useState(null);\n  const [player1Score, setPlayer1Score] = useState(0);\n  const [player2Score, setPlayer2Score] = useState(0);\n  const [players, setPlayers] = useState(1);\n  const [role, setRole] = useState(null);\n  const [obj, setObj] = useState(null);\n  const [game_state, setGame_state] = useState(new Array());\n  const [turn, setTurn] = useState(null);\n  const [log, setLog] = useState(new Array());\n  const roleRef = useRef(role);\n  const stateRef = useRef(state);\n  const turnRef = useRef(turn);\n  const socketRef = useRef(socket);\n\n  /*var\tsleep = ms => {\n  \treturn\tnew Promise(r => setTimeout(r, ms));\n  }*/\n\n  var connect = n => {\n    const ws = new WebSocket('ws://localhost:8000/ws/game/');\n    ws.onmessage = e => {\n      var data = JSON.parse(e.data);\n      if (data.msg_type === 'server update') {\n        if (data.role) setRole(data.role);\n        if (data.message) setMessage(data.message);\n        if (data.room_name) setRoom_name(data.room_name);\n      } else if (data.msg_type === 'pair update') {\n        if (data.obj && data.target === roleRef.current) setObj(data.obj);\n      }\n    };\n    ws.onerror = e => {\n      if (ws.readyState === WebSocket.OPEN) ws.close();\n      setMessage(\"WebSocket error\");\n    };\n    ws.onclose = e => {\n      setMessage(\"WebSocket closed\");\n      /*sleep(1000);*/\n      connect(n);\n    };\n    setSocket(ws);\n    return ws;\n  };\n  var reconnect = () => {\n    setState(0);\n    setPlayers(1);\n    if (socket && socket !== undefined && socket.readyState === WebSocket.OPEN) socket.close();\n    connect(0);\n  };\n  var send_update = (msg, object, target, socket) => {\n    if (!socket || socket === undefined || socket.readyState !== 1 || !object) return;\n    socket.send(JSON.stringify({\n      obj: object,\n      message: msg,\n      target: target\n    }));\n  };\n  var refresh = s => {\n    let message = \"<span style='background:#fff;color:#000;padding:1px 15px'>\" + roleRef.current;\n    if (roleRef.current === turnRef.current) {\n      setGame_state([]);\n      message += \": game refresh! -1</span>\";\n    } else message += \": attempted refresh! -1</span>\";\n    if (roleRef.current === 'host') setPlayer1Score(player1Score - 1);else if (roleRef.current === 'guest') setPlayer2Score(player2Score - 1);\n    console.log(\"s: \", s.readyState);\n    send_update(\"move\", JSON.stringify({\n      log: message\n    }), roleRef.current === 'host' ? 'guest' : 'host', s);\n    let new_log = log;\n    new_log.push(`<p>${message}</p>`);\n    setLog(new_log);\n  };\n  useEffect(() => {\n    const ws = connect(0);\n    return () => {\n      if (ws.readyState === WebSocket.OPEN) ws.close();\n    };\n  }, []);\n  useEffect(() => {\n    if (!socket || socket === undefined) return;\n    if (message === 'pair disconnected') reconnect();else if (message === 'you just got a pair') {\n      setState(1);\n      setPlayers(2);\n      setPlayer1Score(0);\n      setPlayer2Score(0);\n      setGame_state([]);\n      if (roleRef.current === 'host') {\n        setTurn('host');\n        send_update(\"turn\", JSON.stringify({\n          turn: 'host'\n        }), 'guest', socketRef.current);\n      }\n    }\n  }, [message]);\n  useEffect(() => {\n    if (!obj) return;\n    var data = JSON.parse(obj);\n    if (data.state && stateRef.current != data.state) setState(data.state);\n    if (data.game_state) setGame_state(data.game_state);\n    if (data.turn) setTurn(data.turn);\n    if (data.log) {\n      var new_log = log;\n      new_log.push(`<p>${data.log}</p>`);\n      setLog(new_log);\n    }\n    if (data.player1Score && data.player1Score !== player1Score) setPlayer1Score(data.player1Score);\n    if (data.player2Score && data.player2Score !== player2Score) setPlayer2Score(data.player2Score);\n  }, [obj]);\n  var Btn = props => {\n    _s();\n    const elem = useRef(null);\n    useEffect(() => {\n      elem.current = document.getElementById(props.id);\n      elem.current.onclick = e => props.fun();\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      id: props.id,\n      style: {\n        display: props.display ? \"flex\" : \"none\"\n      },\n      children: props.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 12\n    }, this);\n  };\n  _s(Btn, \"0UU6FdZXThfom+9w7J6lrCGaTgU=\");\n  var Loading = props => {\n    _s2();\n    var index = useRef(0);\n    const [elem, setElem] = useState(null);\n    const elemRef = useRef(elem);\n    useEffect(() => {\n      elemRef.current = elem;\n    }, [elem]);\n    var interv = () => {\n      if (index.current < 3) {\n        setElem(elemRef.current + '.');\n        index.current += 1;\n        return;\n      }\n      setElem(props.content);\n      index.current = 0;\n    };\n    useEffect(() => {\n      if (elem === null) {\n        setElem(props.content);\n        setInterval(interv, props.interval);\n      }\n      return () => {\n        clearInterval(interv);\n      };\n    }, []);\n    return props.tag === \"h1\" ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: elem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: elem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 6\n    }, this);\n  };\n  _s2(Loading, \"uhULZ5ks18Sq9JZxoMx4ytAs1hs=\");\n  var Log = props => {\n    _s3();\n    var elem = useRef(null);\n    var logRef = useRef(props.log);\n    useEffect(() => {\n      if (elem.current === null) elem.current = document.getElementById(\"logs\");\n      return () => {\n        for (let c of elem.current.children) elem.current.removeChild(c);\n      };\n    }, []);\n    useEffect(() => {\n      logRef.current = props.log;\n      for (let i of logRef.current) elem.current.innerHTML += i;\n    }, [props.log]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"logs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 10\n    }, this);\n  };\n  _s3(Log, \"xpkX7vZOBj/4XAQ9mIcGigGZumE=\");\n  var Game = props => {\n    _s4();\n    var elem = useRef(null);\n    var game = useRef(props.game_state);\n    var sign = roleRef.current === 'host' ? \"x\" : \"o\";\n    useEffect(() => {\n      if (game.current.length === 0) {\n        for (let i = 0; i < 25; i++) {\n          game.current.push({\n            \"Id\": `_game_div_${i}_`,\n            \"Attr\": `x${i % 5 + 1}, y${Math.floor(i / 5) + 1}`,\n            \"Class\": \"_\",\n            \"C\": \"\"\n          });\n        }\n        props.setGame_state(game.current);\n      }\n      if (elem.current === null) elem.current = document.getElementById(\"game\");\n      return () => {\n        for (let i of elem.current.children) elem.current.removeChild(i);\n        game.current = new Array();\n      };\n    }, []);\n    useEffect(() => {\n      var checked = 0;\n      game.current = props.game_state;\n      if (!game.current || !game.current.length) return () => {};\n      for (let i of game.current) {\n        if (i.Class !== \"_\") checked++;\n        let new_elem = document.createElement(\"div\");\n        new_elem.classList.add(i.Class);\n        new_elem.id = i.Id;\n        new_elem.innerHTML = i.C;\n        new_elem.onclick = e => {\n          if (roleRef.current === turnRef.current && i.Class === \"_\") {\n            i.Class = sign;\n            i.C = `<h1>${sign}</h1>`;\n            e.target.classList.replace(\"_\", i.Class);\n            e.target.innerHTML = i.C;\n            let target = roleRef.current === 'host' ? 'guest' : 'host',\n              logE = `${roleRef.current}: ${sign} on ${i.Attr}`,\n              x = 0,\n              y = 0,\n              z = 0;\n            for (let j = game.current.indexOf(i) - 5; j >= 0 && game.current[j] != undefined; j -= 5)\n            // x - 1\n            {\n              if (game.current[j].Class === i.Class) x++;else break;\n            }\n            for (let j = game.current.indexOf(i) + 5; j < game.current.length && game.current[j] != undefined; j += 5)\n            // x + 1\n            {\n              if (game.current[j].Class === i.Class) x++;else break;\n            }\n            if (x < 3) {\n              for (let j = game.current.indexOf(i) - 1; j >= 0 && game.current[j] != undefined; j -= 1)\n              // y - 1\n              {\n                if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) === i.Attr.substring(5, 6)) y++;else break;\n              }\n              for (let j = game.current.indexOf(i) + 1; j >= 0 && game.current[j] != undefined; j += 1)\n              // y + 1\n              {\n                if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) === i.Attr.substring(5, 6)) y++;else break;\n              }\n              if (y < 3) {\n                for (let j = game.current.indexOf(i) - 6; j >= 0 && game.current[j] !== undefined; j -= 6)\n                // x - 1, y - 1\n                {\n                  if (game.current[j].Class === i.Class) z++;else break;\n                }\n                for (let j = game.current.indexOf(i) + 6; j < game.current.length && game.current[j] !== undefined; j += 6)\n                // x + 1, y + 1\n                {\n                  if (game.current[j].Class === i.Class) z++;else break;\n                }\n                if (z < 3) {\n                  z = 0;\n                  for (let j = game.current.indexOf(i) + 4; j < game.current.length && game.current[j] !== undefined; j += 4)\n                  // x - 1, y + 1\n                  {\n                    if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) !== i.Attr.substring(5, 6)) z++;else break;\n                  }\n                  for (let j = game.current.indexOf(i) - 4; j >= 0 && game.current[j] !== undefined; j -= 4)\n                  // x + 1, y - 1\n                  {\n                    if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) !== i.Attr.substring(5, 6)) z++;else break;\n                  }\n                }\n              }\n            }\n            if (x === 3 || y === 3 || z >= 3) {\n              logE += `<br/><span style=\"color:#000;background:#fff;padding:1px 15px\">${roleRef.current} (${sign}) WINS! +1</span>`;\n              game.current = [];\n              if (roleRef.current === 'host') setPlayer1Score(player1Score + 1);else setPlayer2Score(player2Score + 1);\n              checked = 0;\n            }\n            send_update(\"move\", JSON.stringify({\n              log: logE,\n              game_state: game.current,\n              turn: target\n            }), target, socketRef.current);\n            setTurn(target);\n            let new_log = log;\n            new_log.push(`<p>${logE}</p>`);\n            setLog(new_log);\n          }\n        };\n        new_elem.onmouseenter = e => {\n          if (roleRef.current === turnRef.current && e.target.classList.contains(\"_\")) {\n            new_elem.style.border = \"1px solid #fff\";\n            new_elem.style.transform = \"scale(1.1)\";\n            new_elem.innerHTML = `<h1 id=\"temp_h1\">${sign}</h1>`;\n          } else new_elem.style.cursor = \"no-drop\";\n        };\n        new_elem.onmouseleave = e => {\n          if (e.target.classList.contains(\"_\") && roleRef.current === turnRef.current) {\n            new_elem.style.border = \"1px solid #A9A9A9\";\n            new_elem.style.transform = \"scale(1)\";\n            new_elem.innerHTML = \"\";\n          }\n        };\n        elem.current.appendChild(new_elem);\n      }\n      if (checked === 25) {\n        let draw = \"<span style='color:#000;background:#fff;padding:1px 15px'>draw !</span>\";\n        props.setGame_state([]);\n        send_update(\"move\", JSON.stringify({\n          log: draw\n        }), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current);\n        let new_log = log;\n        new_log.push(`<p>${draw}</p>`);\n        setLog(new_log);\n      }\n    }, [props.game_state]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 10\n    }, this);\n  };\n  _s4(Game, \"hMJ1Q3u0DkHtzRjFZfYaWggOEfY=\");\n  useEffect(() => {\n    roleRef.current = role;\n  }, [role]);\n  useEffect(() => {\n    turnRef.current = turn;\n  }, [turn]);\n  useEffect(() => {\n    socketRef.current = socket;\n  }, [socket]);\n  useEffect(() => {\n    send_update(\"score\", JSON.stringify({\n      player1Score: player1Score\n    }), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current);\n  }, [player1Score]);\n  useEffect(() => {\n    send_update(\"score\", JSON.stringify({\n      player2Score: player2Score\n    }), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current);\n  }, [player2Score]);\n  useEffect(() => {\n    stateRef.current = state;\n    if (stateRef.current === 2) send_update(\"state update\", JSON.stringify({\n      state: stateRef.current\n    }), roleRef.current === 'host' ? 'guest' : 'host', socket);\n  }, [state]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"App\",\n    children: [state === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"looking_up\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Loading, {\n          content: \"looking for an opponent\",\n          tag: \"h1\",\n          interval: 1000\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"this matchmaking system is random\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 43\n          }, this), \"and you are now just waiting\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 76\n          }, this), \"for anyone to just access this same page\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 6\n    }, this) : state === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"found\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"you just found an oppenent(\", role === 'guest' ? 'host' : 'guest', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 7\n        }, this), role === 'host' ? /*#__PURE__*/_jsxDEV(Btn, {\n          text: \"start\",\n          fun: () => {\n            setState(2);\n          },\n          id: \"start_btn\",\n          display: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 26\n        }, this) : role === 'guest' ? /*#__PURE__*/_jsxDEV(Loading, {\n          content: \"waiting for him to start\",\n          tag: \"p\",\n          interval: 1000\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 29\n        }, this) : [], /*#__PURE__*/_jsxDEV(Btn, {\n          text: \"rematch\",\n          fun: () => reconnect(),\n          id: \"rematch_btn\",\n          display: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 6\n    }, this) : state === 2 ? /*#__PURE__*/_jsxDEV(Game, {\n      game_state: game_state,\n      setGame_state: setGame_state\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"something went wrong\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"control\",\n      children: [/*#__PURE__*/_jsxDEV(Btn, {\n        text: \"quit\",\n        fun: () => reconnect(),\n        id: \"quit_btn\",\n        display: state === 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Btn, {\n        text: \"clear/restart\",\n        fun: () => refresh(socketRef.current),\n        id: \"restart_btn\",\n        display: state === 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 8\n        }, this), \" \", state === 2 ? player1Score : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"O\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 8\n        }, this), \" \", state === 2 ? player2Score : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"console\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"turn: \", turn === role ? \"you\" : \"not you\", \" (\", role === 'host' ? \"x\" : \"o\", \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"role: \", role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"room: \", room_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"state: \", state === 0 ? \"waiting for second connection\" : state === 1 ? \"waiting for peer approval\" : state === 2 ? \"good\" : \"not good\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"players: \", players]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"player1-score: \", player1Score]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"player2-score: \", player2Score]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"server-message: \", message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Log, {\n      log: log\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 3\n  }, this);\n};\n_s5(App, \"PscduUys+OVrOAsBEManZBAPx6I=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","useRef","jsxDEV","_jsxDEV","App","_s5","_s","$RefreshSig$","_s2","_s3","_s4","socket","setSocket","state","setState","room_name","setRoom_name","message","setMessage","player1Score","setPlayer1Score","player2Score","setPlayer2Score","players","setPlayers","role","setRole","obj","setObj","game_state","setGame_state","Array","turn","setTurn","log","setLog","roleRef","stateRef","turnRef","socketRef","connect","n","ws","WebSocket","onmessage","e","data","JSON","parse","msg_type","target","current","onerror","readyState","OPEN","close","onclose","reconnect","undefined","send_update","msg","object","send","stringify","refresh","s","console","new_log","push","Btn","props","elem","document","getElementById","id","onclick","fun","style","display","children","text","fileName","_jsxFileName","lineNumber","columnNumber","Loading","index","setElem","elemRef","interv","content","setInterval","interval","clearInterval","tag","Log","logRef","c","removeChild","i","innerHTML","Game","game","sign","length","Math","floor","checked","Class","new_elem","createElement","classList","add","Id","C","replace","logE","Attr","x","y","z","j","indexOf","substring","onmouseenter","contains","border","transform","cursor","onmouseleave","appendChild","draw","_c","$RefreshReg$"],"sources":["/Users/beddinao/cursus-0/trancendance/new_stuff/front_shit/src/App.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport './styles.css';\n\nvar\tApp = () => {\n\tconst [socket, setSocket] = useState(null);\n\tconst [state, setState] = useState(0);\n\tconst [room_name, setRoom_name] = useState(0);\n\tconst [message, setMessage] = useState(null);\n\tconst [player1Score, setPlayer1Score] = useState(0);\n\tconst [player2Score, setPlayer2Score] = useState(0);\n\tconst [players, setPlayers] = useState(1);\n\tconst [role, setRole] = useState(null);\n\tconst [obj, setObj] = useState(null);\n\tconst [game_state, setGame_state] = useState(new Array);\n\tconst [turn, setTurn] = useState(null);\n\tconst [log, setLog] = useState(new Array);\n\tconst roleRef = useRef(role);\n\tconst stateRef = useRef(state);\n\tconst turnRef = useRef(turn);\n\tconst socketRef = useRef(socket);\n\n\t/*var\tsleep = ms => {\n\t\treturn\tnew Promise(r => setTimeout(r, ms));\n\t}*/\n\t\n\tvar connect = n => {\n\t\tconst ws = new WebSocket('ws://localhost:8000/ws/game/');\n\t\tws.onmessage = e => {\n\t\t\tvar\tdata = JSON.parse(e.data);\n\t\t\tif (data.msg_type === 'server update') {\n\t\t\t\tif (data.role)\tsetRole(data.role);\n\t\t\t\tif (data.message)\tsetMessage(data.message);\n\t\t\t\tif (data.room_name) setRoom_name(data.room_name);\n\t\t\t}\n\t\t\telse if (data.msg_type === 'pair update') {\n\t\t\t\tif (data.obj && data.target === roleRef.current)\n\t\t\t\t\tsetObj(data.obj);\n\t\t\t}\n\t\t}\n\t\tws.onerror = e => {\n\t\t\tif (ws.readyState === WebSocket.OPEN)\tws.close();\n\t\t\tsetMessage(\"WebSocket error\");\n\t\t}\n\n\t\tws.onclose = e => {\n\t\t\tsetMessage(\"WebSocket closed\");\n\t\t\t/*sleep(1000);*/\n\t\t\tconnect(n);\n\t\t}\n\t\tsetSocket(ws);\n\t\treturn\tws;\n\t}\n\n\tvar\treconnect = () => {\n\t\tsetState(0);\n\t\tsetPlayers(1);\n\t\tif (socket && socket !== undefined \n\t\t\t&& socket.readyState === WebSocket.OPEN) socket.close();\n\t\tconnect(0);\n\t}\n\n\tvar\tsend_update = (msg, object, target, socket) => {\n\t\tif (!socket || socket === undefined\n\t\t\t|| socket.readyState !== 1 || !object) \n\t\t\treturn ;\n\t\tsocket.send(JSON.stringify({\n\t\t\tobj: object,\n\t\t\tmessage: msg,\n\t\t\ttarget: target,\n\t\t}))\n\t}\n\n\tvar refresh = s => {\n\t\tlet message = \"<span style='background:#fff;color:#000;padding:1px 15px'>\" + roleRef.current;\n\t\tif (roleRef.current === turnRef.current) {\n\t\t\tsetGame_state([]);\n\t\t\tmessage += \": game refresh! -1</span>\";\n\t\t} else\tmessage += \": attempted refresh! -1</span>\";\n\t\tif (roleRef.current === 'host')\tsetPlayer1Score(player1Score - 1);\n\t\telse if (roleRef.current === 'guest')\tsetPlayer2Score(player2Score - 1);\n\t\tconsole.log(\"s: \", s.readyState);\n\t\tsend_update(\"move\", JSON.stringify({\n\t\t\tlog: message,\n\t\t}), roleRef.current === 'host' ? 'guest' : 'host', s)\n\t\tlet new_log = log;\n\t\tnew_log.push(`<p>${message}</p>`);\n\t\tsetLog(new_log);\n\t}\n\n\tuseEffect(() => {\n\t\tconst ws = connect(0);\n\t\treturn () => {\n\t\t\tif (ws.readyState === WebSocket.OPEN)\n\t\t\t\tws.close();\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!socket || socket === undefined) return;\n\t\tif (message === 'pair disconnected') \n\t\t\treconnect();\n\t\telse if (message === 'you just got a pair') {\n\t\t\tsetState(1);\n\t\t\tsetPlayers(2);\n\t\t\tsetPlayer1Score(0);\n\t\t\tsetPlayer2Score(0);\n\t\t\tsetGame_state([]);\n\t\t\tif (roleRef.current === 'host') {\n\t\t\t\tsetTurn('host');\n\t\t\t\tsend_update(\"turn\", JSON.stringify({\n\t\t\t\t\tturn: 'host',\n\t\t\t\t}), 'guest', socketRef.current);\n\t\t\t}\n\t\t}\n\t}, [message])\n\n\tuseEffect(() => {\n\t\tif (!obj)\treturn;\n\t\tvar\tdata = JSON.parse(obj);\n\t\tif (data.state && stateRef.current != data.state)\n\t\t\tsetState(data.state);\n\t\tif (data.game_state)\n\t\t\tsetGame_state(data.game_state);\n\t\tif (data.turn)\n\t\t\tsetTurn(data.turn);\n\t\tif (data.log) {\n\t\t\tvar new_log = log;\n\t\t\tnew_log.push(`<p>${data.log}</p>`);\n\t\t\tsetLog(new_log);\n\t\t}\n\t\tif (data.player1Score && data.player1Score !== player1Score) \n\t\t\tsetPlayer1Score(data.player1Score);\n\t\tif (data.player2Score && data.player2Score !== player2Score)\n\t\t\tsetPlayer2Score(data.player2Score);\n\t}, [obj])\n\n\tvar Btn = props => {\n\t\tconst elem = useRef(null);\n\n\t\tuseEffect(() => {\n\t\t\telem.current = document.getElementById(props.id);\n\t\t\telem.current.onclick = e => props.fun();\n\t\t} , [])\n\n\t\treturn   <button id={props.id} style={{ display: props.display ? \"flex\" : \"none\" }} >{props.text}</button>\n\t}\n\n\tvar\tLoading = props => {\n\t\tvar\tindex = useRef(0);\n\t\tconst [elem, setElem] = useState(null);\n\t\tconst elemRef = useRef(elem);\n\t\tuseEffect(() => { elemRef.current = elem}, [elem]);\n\n\t\tvar\tinterv = () => {\n\t\t\tif (index.current < 3) {\n\t\t\t\tsetElem(elemRef.current + '.');\n\t\t\t\tindex.current += 1;\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tsetElem(props.content);\n\t\t\tindex.current = 0;\n\t\t}\n\t\tuseEffect(() => {\n\t\t\tif (elem === null) {\n\t\t\t\tsetElem(props.content);\n\t\t\t\tsetInterval(interv, props.interval);\n\t\t\t}\n\t\t\treturn\t() => {\n\t\t\t\tclearInterval(interv);\n\t\t\t}\n\t\t}, [])\n\t\treturn\tprops.tag === \"h1\" ? <h1>{elem}</h1>\n\t\t\t: <p>{elem}</p>;\n\t}\n\n\tvar\tLog = props => {\n\t\tvar\telem = useRef(null);\n\t\tvar\tlogRef = useRef(props.log);\n\n\t\tuseEffect(() => {\n\t\t\tif (elem.current === null)\telem.current = document.getElementById(\"logs\");\n\t\t\treturn () => {\n\t\t\t\tfor (let c of elem.current.children)\n\t\t\t\t\telem.current.removeChild(c);\n\t\t\t}\n\t\t}, [])\n\n\t\tuseEffect(() => {\n\t\t\tlogRef.current = props.log;\n\t\t\tfor (let i of logRef.current) \n\t\t\t\telem.current.innerHTML += i;\n\t\t}, [props.log])\n\n\t\treturn\t<div id=\"logs\"></div>\n\t}\n\n\tvar\tGame = props => {\n\t\tvar\telem = useRef(null);\n\t\tvar\tgame = useRef(props.game_state);\n\t\tvar\tsign = (roleRef.current === 'host') ? \"x\" : \"o\";\n\t\t\n\t\tuseEffect(() => {\n\t\t\tif (game.current.length === 0) {\n\t\t\t\tfor (let i = 0; i < 25; i++) {\n\t\t\t\t\tgame.current.push({\n\t\t\t\t\t\t\"Id\": `_game_div_${i}_`,\n\t\t\t\t\t\t\"Attr\": `x${(i % 5)+1}, y${Math.floor(i / 5)+1}`,\n\t\t\t\t\t\t\"Class\": \"_\",\n\t\t\t\t\t\t\"C\": \"\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tprops.setGame_state(game.current);\n\t\t\t}\n\t\t\tif (elem.current === null)\telem.current = document.getElementById(\"game\");\n\t\t\treturn () => {\n\t\t\t\tfor (let i of elem.current.children) \n\t\t\t\t\telem.current.removeChild(i);\n\t\t\t\tgame.current = new Array;\n\t\t\t}\n\t\t}, [])\n\n\t\tuseEffect(() => {\n\t\t\tvar checked = 0;\n\t\t\tgame.current = props.game_state;\n\t\t\tif (!game.current || !game.current.length) return () => {};\n\t\t\tfor (let i of game.current) {\n\t\t\t\tif (i.Class !== \"_\")\tchecked++;\n\t\t\t\tlet new_elem = document.createElement(\"div\");\n\t\t\t\tnew_elem.classList.add(i.Class);\n\t\t\t\tnew_elem.id = i.Id;\n\t\t\t\tnew_elem.innerHTML = i.C;\n\t\t\t\tnew_elem.onclick = e => {\n\t\t\t\t\tif (roleRef.current === turnRef.current && i.Class === \"_\") {\n\t\t\t\t\t\ti.Class = sign;\n\t\t\t\t\t\ti.C = `<h1>${sign}</h1>`;\n\t\t\t\t\t\te.target.classList.replace(\"_\", i.Class);\n\t\t\t\t\t\te.target.innerHTML = i.C;\n\t\t\t\t\t\tlet target = roleRef.current === 'host' ? 'guest' : 'host', logE = `${roleRef.current}: ${sign} on ${i.Attr}`, x = 0, y = 0, z = 0;\n\t\t\t\t\t\tfor (let j = game.current.indexOf(i) - 5; j >= 0 && game.current[j] != undefined; j -= 5) // x - 1\n\t\t\t\t\t\t{ if (game.current[j].Class === i.Class) x++; else break; }\n\t\t\t\t\t\tfor (let j = game.current.indexOf(i) + 5; j < game.current.length && game.current[j] != undefined; j += 5) // x + 1\n\t\t\t\t\t\t{ if (game.current[j].Class === i.Class) x++; else break; }\n\t\t\t\t\t\tif (x < 3) {\n\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) - 1; j >= 0 && game.current[j] != undefined; j -= 1) // y - 1\n\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) === i.Attr.substring(5, 6)) y++; else break; }\n\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) + 1; j >= 0 && game.current[j] != undefined; j += 1) // y + 1\n\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) === i.Attr.substring(5, 6)) y++; else break; }\n\t\t\t\t\t\t\tif (y < 3) {\n\t\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) - 6; j >= 0 && game.current[j] !== undefined; j -= 6) // x - 1, y - 1\n\t\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class) z++; else break; }\n\t\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) + 6; j < game.current.length && game.current[j] !== undefined; j += 6) // x + 1, y + 1\n\t\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class) z++; else break; }\n\t\t\t\t\t\t\t\tif (z < 3) {\n\t\t\t\t\t\t\t\t\tz = 0;\n\t\t\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) + 4; j < game.current.length && game.current[j] !== undefined; j += 4) // x - 1, y + 1\n\t\t\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) !== i.Attr.substring(5, 6))\tz++; else break; }\n\t\t\t\t\t\t\t\t\tfor (let j = game.current.indexOf(i) - 4; j >= 0 && game.current[j] !== undefined; j -= 4) // x + 1, y - 1\n\t\t\t\t\t\t\t\t\t{ if (game.current[j].Class === i.Class && game.current[j].Attr.substring(5, 6) !== i.Attr.substring(5, 6))\tz++; else break; }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x === 3 || y === 3 || z >= 3) {\n\t\t\t\t\t\t\tlogE += `<br/><span style=\"color:#000;background:#fff;padding:1px 15px\">${roleRef.current} (${sign}) WINS! +1</span>`;\n\t\t\t\t\t\t\tgame.current = [];\n\t\t\t\t\t\t\tif (roleRef.current === 'host') setPlayer1Score(player1Score + 1);\n\t\t\t\t\t\t\telse\tsetPlayer2Score(player2Score + 1);\n\t\t\t\t\t\t\tchecked = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsend_update(\"move\", JSON.stringify({\n\t\t\t\t\t\t\tlog: logE,\n\t\t\t\t\t\t\tgame_state: game.current,\n\t\t\t\t\t\t\tturn: target,\n\t\t\t\t\t\t}), target, socketRef.current);\n\t\t\t\t\t\tsetTurn(target);\n\t\t\t\t\t\tlet new_log = log;\n\t\t\t\t\t\tnew_log.push(`<p>${logE}</p>`);\n\t\t\t\t\t\tsetLog(new_log)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnew_elem.onmouseenter = e => {\n\t\t\t\t\tif (roleRef.current === turnRef.current && e.target.classList.contains(\"_\")) {\n\t\t\t\t\t\tnew_elem.style.border = \"1px solid #fff\";\n\t\t\t\t\t\tnew_elem.style.transform = \"scale(1.1)\";\n\t\t\t\t\t\tnew_elem.innerHTML = `<h1 id=\"temp_h1\">${sign}</h1>`;\n\t\t\t\t\t}\n\t\t\t\t\telse\tnew_elem.style.cursor = \"no-drop\";\n\t\t\t\t}\n\t\t\t\tnew_elem.onmouseleave = e => {\n\t\t\t\t\tif (e.target.classList.contains(\"_\") && roleRef.current === turnRef.current) {\n\t\t\t\t\t\tnew_elem.style.border = \"1px solid #A9A9A9\";\n\t\t\t\t\t\tnew_elem.style.transform = \"scale(1)\";\n\t\t\t\t\t\tnew_elem.innerHTML = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telem.current.appendChild(new_elem);\n\t\t\t}\n\t\t\tif (checked === 25) {\n\t\t\t\tlet\tdraw = \"<span style='color:#000;background:#fff;padding:1px 15px'>draw !</span>\"\n\t\t\t\tprops.setGame_state([]);\n\t\t\t\tsend_update(\"move\", JSON.stringify({\n\t\t\t\t\tlog: draw,\n\t\t\t\t}), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current);\n\t\t\t\tlet\tnew_log = log;\n\t\t\t\tnew_log.push(`<p>${draw}</p>`);\n\t\t\t\tsetLog(new_log);\n\t\t\t}\n\t\t}, [props.game_state])\n\n\t\treturn\t<div id=\"game\"></div>\n\t}\n\n\tuseEffect(() => { roleRef.current = role }, [role])\n\tuseEffect(() => { turnRef.current = turn }, [turn])\n\tuseEffect(() => { socketRef.current = socket }, [socket])\n\tuseEffect(() => { send_update(\"score\", JSON.stringify({player1Score: player1Score}), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current)}, [player1Score])\n\tuseEffect(() => { send_update(\"score\", JSON.stringify({player2Score: player2Score}), roleRef.current === 'host' ? 'guest' : 'host', socketRef.current)}, [player2Score])\n\tuseEffect(() => {\n\t\tstateRef.current = state;\n\t\tif (stateRef.current === 2)\n\t\t\tsend_update(\"state update\", JSON.stringify({\n\t\t\t\tstate: stateRef.current,\n\t\t\t}), roleRef.current === 'host' ? 'guest' : 'host', socket);\n\t}, [state])\n\n\treturn\t(\n\t\t<div id=\"App\">\n\t\t\t{\n\t\t\t\tstate === 0 ?\n\t\t\t\t\t<div id=\"looking_up\" >\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Loading content=\"looking for an opponent\" tag=\"h1\" interval={1000} />\n\t\t\t\t\t\t<p>this matchmaking system is random<br/>and you are now just waiting<br/>\n\t\t\t\t\t\t\tfor anyone to just access this same page\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t: state === 1 ?\n\t\t\t\t\t<div id=\"found\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1>you just found an oppenent({role === 'guest' ? 'host' : 'guest'})</h1>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trole === 'host' ? <Btn text=\"start\" fun={() => {setState(2)}} id=\"start_btn\" display={true} />\n\t\t\t\t\t\t\t: role === 'guest' ? <Loading content=\"waiting for him to start\" tag=\"p\" interval={1000} />\n\t\t\t\t\t\t\t: []\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Btn text=\"rematch\" fun={() => reconnect()} id=\"rematch_btn\" display={true} />\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t: state === 2 ? <Game game_state={game_state} setGame_state={setGame_state} />\n\t\t\t\t: <h1>something went wrong</h1>\n\t\t\t}\n\t\t\t<div id=\"control\">\n\t\t\t\t<Btn text=\"quit\" fun={() => reconnect()} id=\"quit_btn\" display={state === 2} />\n\t\t\t\t<Btn text=\"clear/restart\" fun={() => refresh(socketRef.current)} id=\"restart_btn\" display={state === 2} />\n\t\t\t</div>\n\t\t\t<div id=\"stats\">\n\t\t\t\t<p><span>X</span> {state === 2 ? player1Score : ''}</p>\n\t\t\t\t<p><span>O</span> {state === 2 ? player2Score : ''}</p>\n\t\t\t</div>\n\t\t\t<div id=\"console\">\n\t\t\t\t<p>turn: {turn === role ? \"you\" : \"not you\"} ({role === 'host' ? \"x\" : \"o\"})</p>\n\t\t\t\t<p>role: {role}</p>\n\t\t\t\t<p>room: {room_name}</p>\n\t\t\t\t<p>state: {state === 0 ? \"waiting for second connection\"\n\t\t\t\t\t\t: state === 1 ? \"waiting for peer approval\"\n\t\t\t\t\t\t: state === 2 ? \"good\" : \"not good\"}</p>\n\t\t\t\t<p>players: {players}</p>\n\t\t\t\t<p>player1-score: {player1Score}</p>\n\t\t\t\t<p>player2-score: {player2Score}</p>\n\t\t\t\t<p>server-message: {message}</p>\n\t\t\t\t{/*<p id=\"console_obj\">server-object: {obj}</p>*/}\n\t\t\t</div>\n\t\t\t<Log log={log} />\n\t\t</div>\n\t)\n}\n\nexport\tdefault App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}