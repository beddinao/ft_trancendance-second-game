{"ast":null,"code":"var _jsxFileName = \"/Users/beddinao/cursus-0/trancendance/new_stuff/front_shit/src/game.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar canvas,\n  ctx,\n  wrapper,\n  game_state,\n  game_update = null,\n  current_players,\n  score = {\n    p_1: 0,\n    p_2: 0\n  },\n  game = [];\nvar Game = props => {\n  _s();\n  useEffect(() => {\n    canvas = document.getElementById(\"canvas\");\n    ctx = canvas.getContext(\"2d\");\n    wrapper = document.getElementById(\"wrapper\");\n    game.c_wid = canvas.width = wrapper.offsetWidth;\n    game.c_hei = canvas.height = window.innerHeight / 2;\n    game_update = JSON.parse(props.game_update);\n    current_players = props.players;\n    game.vars = {\n      sq_w: game.c_hei / 10,\n      sq_h: game.c_hei / 10,\n      main_c: \"#e5e5e5\",\n      main_c_rgb: \"rgb(141, 153, 174, \",\n      main_b: \"#000\",\n      ps_c: \"#fca311\",\n      coins_c: \"#0582ca\",\n      enemies_MpF: 4,\n      enemies_c_f: 0,\n      enemies_radius: Math.floor(game.c_hei / 10 / 3 / 1.5),\n      coins_radius: game.c_hei / 10 / 8,\n      players_radius: game.c_hei / 10 / 5\n    };\n    game.squares = new Array();\n    game.enemies = new Array();\n    game.coins = new Array();\n    game.players = new Array();\n    var rand_num = (min, max) => {\n      return Math.floor(Math.random() * (max - min + 1) + min);\n    };\n    game.initiate = () => {\n      let a,\n        b,\n        c,\n        d,\n        p = true;\n      for (let i = 0; i < game.c_wid - 1; i += game.vars.sq_w) {\n        for (let j = 0; j < game.c_hei - 1 && rand_num(0, i / 3); j += game.vars.sq_h) {\n          d = game.players.length < current_players && (p || i > game.c_wid / 2);\n          a = !d && (game.squares.length < 20 || rand_num(0, 1));\n          b = !d && !a && game.enemies.length < props.enemies && !rand_num(0, 5);\n          c = !d && !a && !b && game.coins.length < props.coins && !rand_num(0, 5);\n          if (a) game.squares.push({\n            x: i,\n            y: j,\n            type: \"wall\",\n            health: rand_num(1, 5)\n          });else if (b) {\n            b = game.vars.sq_w / 3;\n            game.enemies.push({\n              x: i + b,\n              y: j + b,\n              mode: !(game.enemies.length % 2),\n              dir_x: rand_num(0, 1) ? -1 : 1,\n              dir_y: rand_num(0, 1) ? -1 : 1,\n              type: \"enemy\",\n              health: !(game.enemies.length % 2) ? 4 : 8,\n              max_health: !(game.enemies.length % 2) ? 4 : 8\n            });\n          } else if (c) {\n            game.coins.push({\n              x: i + game.vars.sq_w / 2,\n              y: j + game.vars.sq_h / 2,\n              type: \"coin\"\n            });\n          } else if (d) {\n            p = false;\n            d = game.vars.sq_w / 2;\n            game.players.push({\n              x: i + d,\n              y: j + d,\n              mode: game.players.length,\n              dir_x: rand_num(-1, 1),\n              dir_y: rand_num(-1, 1),\n              shooting: 0,\n              type: \"player\",\n              state: 1,\n              coins: 0,\n              health: 5,\n              max_health: 3\n            });\n            //}\n          }\n        }\n      }\n    };\n    game.handle_collision = (cause, target) => {\n      let color = game.vars.main_c,\n        update = 0,\n        log;\n      if (target.type == \"wall\") {\n        log = \"hit wall, \";\n        target.health -= 1;\n        if (!target.health) {\n          game.squares.splice(game.squares.indexOf(target), 1);\n          log += \"destroyed\";\n        } else log += \"health: \" + target.health;\n      } else if (target.type == \"enemy\") {\n        log = \"hit enemy, \";\n        target.health -= 1;\n        if (!target.health) {\n          game.enemies.splice(game.enemies.indexOf(target), 1);\n          cause.coins += 2;\n          update = 1;\n          log += \"(got them +2)\";\n          color = game.vars.ps_c;\n        } else log += \", health: \" + target.health;\n      } else if (target.type == \"player\") {\n        log = \"player got hit \";\n        update = 2;\n        target.health -= 1;\n        if (!target.health) {\n          game.players[game.players.indexOf(target)].state = 0;\n          current_players--;\n          log += \" and destroyed \";\n          if (!current_players) {\n            log += \", ending game\";\n            game_state = 2;\n            //props.setState(game_state);\n          }\n          props.setPlayers(current_players);\n          color = \"red\";\n        } else log += target.health + \" more\";\n      } else if (target.type == \"coin\") {\n        log = \"got coin \";\n        game.coins.splice(game.coins.indexOf(target), 1);\n        cause.coins += 1;\n        color = game.vars.coins_c;\n        update = 1;\n        log += \"+1\";\n        if (game.coins.length == 0) {\n          game_state = 2;\n        }\n      }\n      if (update) {\n        if (update == 1) {\n          if (cause.mode == 0) {\n            score.p_1 = cause.coins;\n            props.p_1(cause.coins);\n          } else {\n            props.p_2(cause.coins);\n            score.p_2 = cause.coins;\n          }\n        } else {\n          if (target.mode == 0) {\n            props.p_1(target.coins);\n            score.p_1 = target.coins;\n          } else {\n            props.p_2(target.coins);\n            score.p_2 = target.coins;\n          }\n        }\n      }\n      let logs = props.log;\n      logs.push(/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: color\n        },\n        children: log\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 5\n      }, this));\n      props.setLogs(logs);\n    };\n    game.collided = (x, y, w, h, s, ray) => {\n      if (x < 0 || x > game.c_wid - w || y < 0 || y > game.c_hei - h) return 4;\n      try {\n        game.squares.forEach(e => {\n          if (e.x <= x + w && e.x + game.vars.sq_w >= x && e.y <= y + h && e.y + game.vars.sq_h >= y) {\n            if (s.type == \"player\" && ray) game.handle_collision(s, e);\n            throw 1;\n          }\n        });\n        if (ray || s.type == \"enemy\") {\n          game.enemies.forEach(e => {\n            let new_w = game.vars.enemies_radius * 2,\n              new_x = e.x - game.vars.enemies_radius,\n              new_y = e.y - game.vars.enemies_radius;\n            if (e != s && new_x < x + w && new_x + new_w > x && new_y < y + h && new_y + new_w > y) {\n              if (s.type == \"player\") game.handle_collision(s, e);\n              throw 2;\n            }\n          });\n        }\n        if (s.type == \"player\") {\n          game.coins.forEach(e => {\n            let new_w = game.vars.coins_radius * 2,\n              new_x = e.x - game.vars.coins_radius,\n              new_y = e.y - game.vars.coins_radius;\n            if (e != s && new_x < x + w && new_x + new_w > x && new_y < y + h && new_y + new_w > y) {\n              game.handle_collision(s, e);\n              throw 3;\n            }\n          });\n        }\n        game.players.forEach(e => {\n          if (e.state) {\n            let new_w = game.vars.players_radius * 2,\n              new_x = e.x - game.vars.players_radius,\n              new_y = e.y - game.vars.players_radius;\n            if (e != s && new_x < x + w && new_x + new_w > x && new_y < y + h && new_y + new_w > y) {\n              if (s.type == \"enemy\" || s.type == \"player\" && ray) game.handle_collision(s, e);\n              throw 3;\n            }\n          }\n        });\n      } catch (c) {\n        return c;\n      }\n      return 0;\n    };\n    game.continue = () => {\n      //  coins\n      ctx.fillStyle = game.vars.coins_c;\n      game.coins.forEach(e => {\n        ctx.beginPath();\n        ctx.arc(e.x, e.y, game.vars.coins_radius, 0, 2 * Math.PI);\n        ctx.fill();\n      });\n      //  squares\n      game.squares.forEach(e => {\n        ctx.fillStyle = game.vars.main_c_rgb + (1 - 1 / e.health + 0.2) + \")\";\n        ctx.fillRect(e.x, e.y, game.vars.sq_w, game.vars.sq_h);\n      });\n      //  enemies\n      ctx.strokeStyle = game.vars.main_c;\n      game.enemies.forEach(e => {\n        ctx.fillStyle = game.vars.main_c;\n        ctx.beginPath();\n        ctx.arc(e.x, e.y, game.vars.enemies_radius, e.max_health - e.health, 2 * Math.PI);\n        if (e.mode) ctx.fill();else {\n          ctx.fillStyle = game.vars.main_b;\n          ctx.fill();\n          ctx.stroke();\n        }\n        //  enemy direction\n        let ray_x = e.x + (e.dir_x < 0 ? -(game.vars.enemies_radius / 3) : e.dir_x > 0 ? game.vars.enemies_radius / 3 : 0),\n          ray_y = e.y + (e.dir_y < 0 ? -(game.vars.enemies_radius / 3) : e.dir_y > 0 ? game.vars.enemies_radius / 3 : 0),\n          catcher = 0;\n        ctx.beginPath();\n        ctx.arc(ray_x, ray_y, game.vars.enemies_radius / 3, 0, 2 * Math.PI);\n        ctx.fillStyle = e.mode ? game.vars.main_b : game.vars.main_c;\n        ctx.fill();\n        // enemy ray\n        ctx.beginPath();\n        ctx.moveTo(ray_x, ray_y);\n        while (catcher < game.c_wid && game.collided(ray_x, ray_y, 1, 1, e, true) == 0) {\n          ray_x += 2 * e.dir_x;\n          ray_y += 2 * e.dir_y;\n          catcher++;\n        }\n        ctx.lineTo(ray_x, ray_y);\n        ctx.stroke();\n      });\n      //  players\n      ctx.strokeStyle = game.vars.ps_c;\n      game.players.forEach(e => {\n        if (e.state) {\n          let x_ray = e.x + (e.dir_x < 0 ? -(game.vars.players_radius / 3) : e.dir_x > 0 ? game.vars.players_radius / 3 : 0),\n            y_ray = e.y + (e.dir_y < 0 ? -(game.vars.players_radius / 3) : e.dir_y > 0 ? game.vars.players_radius / 3 : 0),\n            catcher = 0;\n          //  player itself\n          ctx.fillStyle = game.vars.ps_c;\n          ctx.beginPath();\n          ctx.arc(e.x, e.y, game.vars.players_radius, e.max_health - e.health, 2 * Math.PI);\n          e.mode ? ctx.fill() : ctx.stroke();\n          //  player direction\n          ctx.beginPath();\n          ctx.arc(x_ray, y_ray, game.vars.players_radius / 3, 0, 2 * Math.PI);\n          ctx.fillStyle = e.mode ? game.vars.main_b : game.vars.ps_c;\n          ctx.fill();\n          //  player shoot\n          if (e.shooting > 0) {\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.moveTo(x_ray, y_ray);\n            while (catcher < game.c_wid && game.collided(x_ray, y_ray, 1, 1, e, e.shooting == 1) == 0) {\n              x_ray += 2 * e.dir_x;\n              y_ray += 2 * e.dir_y;\n              catcher++;\n            }\n            ctx.lineTo(x_ray, y_ray);\n            ctx.stroke();\n            e.shooting += 1;\n          }\n          if (e.shooting > 2) e.shooting = 0;\n        }\n      });\n    };\n    game.moveEnemies = () => {\n      if (game.vars.enemies_c_f < game.vars.enemies_MpF) game.vars.enemies_c_f++;else {\n        let new_x, new_y;\n        game.vars.enemies_c_f = 0;\n        game.enemies.forEach(e => {\n          new_x = e.x + 5 * e.dir_x;\n          new_y = e.y + 5 * e.dir_y;\n          if (game.collided(new_x - game.vars.enemies_radius, new_y - game.vars.enemies_radius, game.vars.enemies_radius * 2, game.vars.enemies_radius * 2, e, false) != 0) {\n            let new_dir_x, new_dir_y;\n            new_dir_x = rand_num(-1, 1);\n            while ((new_dir_y = rand_num(-1, 1)) == e.dir_y);\n            e.dir_x = new_dir_x;\n            e.dir_y = !new_dir_y && !new_dir_x ? rand_num(0, 1) ? -1 : 1 : new_dir_y;\n          } else {\n            e.x = new_x;\n            e.y = new_y;\n          }\n        });\n      }\n    };\n    game.movePlayer = code => {\n      let p_index = 20,\n        new_x,\n        new_y,\n        p_radius,\n        p;\n      if (game.players.length > 0 && game.players[0].state && (code <= 40 && code >= 37 || code == 13)) {\n        p = 0;\n        if (code == 13) {\n          game.players[p].shooting = 1;\n          return;\n        }\n        game.players[p].dir_x = code == 37 ? -1 : code == 39 ? 1 : 0;\n        game.players[p].dir_y = code == 38 ? -1 : code == 40 ? 1 : 0;\n      } else return;\n      p_radius = game.vars.players_radius;\n      new_x = game.players[p].x + p_index * game.players[p].dir_x;\n      new_y = game.players[p].y + p_index * game.players[p].dir_y;\n      while (p_index >= 0 && game.collided(new_x - p_radius, new_y - p_radius, p_radius * 2, p_radius * 2, game.players[p], false) != 0) {\n        new_x = game.players[p].x + p_index * game.players[p].dir_x;\n        new_y = game.players[p].y + p_index * game.players[p].dir_y;\n        p_index -= 2;\n      }\n      game.players[p].x = new_x;\n      game.players[p].y = new_y;\n    };\n    game.send_updates = up_type => {\n      props.send_update(up_type, JSON.stringify({\n        w: game.c_wid,\n        h: game.c_hei,\n        current_players: current_players,\n        players: game.players,\n        enemies: game.enemies,\n        coins: game.coins,\n        squares: game.squares,\n        log: props.log,\n        p1_score: score.p_1,\n        p2_score: score.p_2,\n        state: null\n      }), 'guest');\n    };\n    game.receive_updates = () => {\n      if (game_update != null && game_update == null) {\n        game.players[1] = game_update.player;\n        game_update = null;\n      }\n    };\n    game.send_state = () => {\n      props.send_update(\"game state\", JSON.stringify({\n        state: game_state\n      }), 'guest');\n    };\n    game.receive_state = () => {\n      if (game_update != null && game_update.state != null) {\n        game_state = game_update.state;\n        game_update = null;\n      }\n    };\n    game.pause = () => {\n      ctx.fillStyle = game.vars.main_c;\n      let pause = \"PAUSE\";\n      ctx.fillText(pause, game.c_wid / 2 - pause.length, game.c_hei / 2);\n    };\n    game.end = () => {\n      ctx.fillStyle = game.vars.main_c;\n      let over = \"GAME OVER\",\n        winner;\n      if (game.players.length > 0) winner = game.players[0].coins > game.players[1].coins ? \"PLAYER 1\" : game.players[0].coins < game.players[1].coins ? \"PLAYER 2\" : \"NO ONE\";else winner = \"NO ONE\";\n      winner += \" WON\";\n      ctx.fillText(over, game.c_wid / 2 - over.length / 2 * 10, game.c_hei / 2);\n      ctx.fillText(winner, game.c_wid / 2 - winner.length / 2 * 10, game.c_hei / 2 + 30);\n      setTimeout(() => {\n        game.squares = new Array();\n        game.enemies = new Array();\n        game.coins = new Array();\n        game.players = new Array();\n        game_state = -1;\n        props.toggle();\n      }, 3000);\n    };\n    window.onresize = a => {\n      game.c_wid = canvas.width = wrapper.offsetWidth;\n      game.c_hei = canvas.height = window.innerHeight / 2;\n      canvas.style.width = game.c_wid + \"px\";\n      canvas.style.height = game.c_hei + \"px\";\n      game.vars.sq_w = game.c_hei / 10;\n      game.vars.sq_h = game.c_hei / 10;\n    };\n    game.draw = () => {\n      ctx.clearRect(0, 0, game.c_wid, game.c_hei);\n      ctx.font = \"20px monospace\";\n      ctx.lineWidth = \"2\";\n      let update_type = \"game started\";\n      game.receive_updates();\n      game.receive_state();\n      switch (game_state) {\n        case 0:\n          game.initiate();\n          window.onkeydown = e => game.movePlayer(e.keyCode);\n          break;\n        case 1:\n          game.pause();\n          update_type = \"game pause\";\n          break;\n        case 2:\n          game.end();\n          update_type = \"game over\";\n          break;\n        case -1:\n          update_type = \"you just found a host\";\n          break;\n        default:\n          game.moveEnemies();\n          game.continue();\n      }\n      game.send_updates(update_type);\n      if (!game_state) {\n        game_state = 3;\n      }\n      //game.send_state();\n      props.setState(game_state);\n      requestAnimationFrame(game.draw);\n    };\n    requestAnimationFrame(game.draw);\n  }, []);\n  current_players = props.players;\n  game_state = props.state;\n  game_update = JSON.parse(props.game_update);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    id: \"canvas\",\n    className: \"off\",\n    children: \"something is wrong\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 528,\n    columnNumber: 9\n  }, this);\n};\n_s(Game, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["useEffect","jsxDEV","_jsxDEV","canvas","ctx","wrapper","game_state","game_update","current_players","score","p_1","p_2","game","Game","props","_s","document","getElementById","getContext","c_wid","width","offsetWidth","c_hei","height","window","innerHeight","JSON","parse","players","vars","sq_w","sq_h","main_c","main_c_rgb","main_b","ps_c","coins_c","enemies_MpF","enemies_c_f","enemies_radius","Math","floor","coins_radius","players_radius","squares","Array","enemies","coins","rand_num","min","max","random","initiate","a","b","c","d","p","i","j","length","push","x","y","type","health","mode","dir_x","dir_y","max_health","shooting","state","handle_collision","cause","target","color","update","log","splice","indexOf","setPlayers","logs","style","children","fileName","_jsxFileName","lineNumber","columnNumber","setLogs","collided","w","h","s","ray","forEach","e","new_w","new_x","new_y","continue","fillStyle","beginPath","arc","PI","fill","fillRect","strokeStyle","stroke","ray_x","ray_y","catcher","moveTo","lineTo","x_ray","y_ray","lineWidth","moveEnemies","new_dir_x","new_dir_y","movePlayer","code","p_index","p_radius","send_updates","up_type","send_update","stringify","p1_score","p2_score","receive_updates","player","send_state","receive_state","pause","fillText","end","over","winner","setTimeout","toggle","onresize","draw","clearRect","font","update_type","onkeydown","keyCode","setState","requestAnimationFrame","id","className","_c","$RefreshReg$"],"sources":["/Users/beddinao/cursus-0/trancendance/new_stuff/front_shit/src/game.js"],"sourcesContent":["import { useEffect } from \"react\";\n\nvar canvas,\n\tctx,\n\twrapper,\n\tgame_state,\n\tgame_update = null,\n\tcurrent_players,\n\tscore = {p_1: 0, p_2: 0},\n\tgame = [];\n\nvar Game = (props) => {\n\tuseEffect(() => {\n\t\tcanvas = document.getElementById(\"canvas\");\n\t\tctx = canvas.getContext(\"2d\");\n\t\twrapper = document.getElementById(\"wrapper\");\n\t\tgame.c_wid = canvas.width = wrapper.offsetWidth;\n\t\tgame.c_hei = canvas.height = window.innerHeight / 2;\n\t\tgame_update = JSON.parse(props.game_update);\n\t\tcurrent_players = props.players;\n\n\t\tgame.vars = {\n\t\t\tsq_w: game.c_hei / 10,\n\t\t\tsq_h: game.c_hei / 10,\n\t\t\tmain_c: \"#e5e5e5\",\n\t\t\tmain_c_rgb : \"rgb(141, 153, 174, \",\n\t\t\tmain_b: \"#000\",\n\t\t\tps_c : \"#fca311\",\n\t\t\tcoins_c : \"#0582ca\",\n\t\t\tenemies_MpF: 4,\n\t\t\tenemies_c_f: 0,\n\t\t\tenemies_radius: Math.floor(((game.c_hei / 10) / 3) / 1.5),\n\t\t\tcoins_radius: (game.c_hei / 10) / 8,\n\t\t\tplayers_radius: (game.c_hei / 10) / 5\n\t\t};\n\n\t\tgame.squares = new Array();\n\t\tgame.enemies = new Array();\n\t\tgame.coins = new Array();\n\t\tgame.players = new Array();\n\n\t\tvar rand_num = (min, max) => {\n\t\t\treturn Math.floor(Math.random() * (max - min + 1) + min);\n\t\t};\n\n\t\tgame.initiate = () => {\n\t\t\tlet a, b, c, d, p=true;\n\t\t\tfor (let i = 0; i < game.c_wid - 1; i += game.vars.sq_w) {\n\t\t\t\tfor (\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tj < game.c_hei - 1 && rand_num(0, i / 3);\n\t\t\t\t\tj += game.vars.sq_h\n\t\t\t\t) {\n\t\t\t\t\td = game.players.length < current_players && (p || i > game.c_wid/2);\n\t\t\t\t\ta = !d && (game.squares.length < 20 || rand_num(0, 1));\n\t\t\t\t\tb = !d && !a && game.enemies.length < props.enemies && !rand_num(0, 5);\n\t\t\t\t\tc = !d && !a && !b && game.coins.length < props.coins && !rand_num(0, 5);\n\n\t\t\t\t\tif (a)\n\t\t\t\t\t\tgame.squares.push({\n\t\t\t\t\t\t\tx: i,\n\t\t\t\t\t\t\ty: j,\n\t\t\t\t\t\t\ttype: \"wall\",\n\t\t\t\t\t\t\thealth : rand_num(1, 5),\n\t\t\t\t\t\t});\n\t\t\t\t\telse if (b) {\n\t\t\t\t\t\tb = game.vars.sq_w / 3;\n\t\t\t\t\t\tgame.enemies.push({\n\t\t\t\t\t\t\tx: i + b,\n\t\t\t\t\t\t\ty: j + b,\n\t\t\t\t\t\t\tmode: !(game.enemies.length % 2),\n\t\t\t\t\t\t\tdir_x: rand_num(0, 1) ? -1 : 1,\n\t\t\t\t\t\t\tdir_y: rand_num(0, 1) ? -1 : 1,\n\t\t\t\t\t\t\ttype: \"enemy\",\n\t\t\t\t\t\t\thealth : !(game.enemies.length % 2) ? 4 : 8,\n\t\t\t\t\t\t\tmax_health : !(game.enemies.length % 2) ? 4 : 8,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (c) {\n\t\t\t\t\t\tgame.coins.push({\n\t\t\t\t\t\t\tx: i + game.vars.sq_w / 2,\n\t\t\t\t\t\t\ty: j + game.vars.sq_h / 2,\n\t\t\t\t\t\t\ttype: \"coin\",\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (d) {\n\t\t\t\t\t\tp = false;\n\t\t\t\t\t\td = game.vars.sq_w / 2;\n\t\t\t\t\t\tgame.players.push({\n\t\t\t\t\t\t\tx: i + d,\n\t\t\t\t\t\t\ty: j + d,\n\t\t\t\t\t\t\tmode: game.players.length,\n\t\t\t\t\t\t\tdir_x: rand_num(-1, 1),\n\t\t\t\t\t\t\tdir_y: rand_num(-1, 1),\n\t\t\t\t\t\t\tshooting: 0,\n\t\t\t\t\t\t\ttype: \"player\",\n\t\t\t\t\t\t\tstate: 1,\n\t\t\t\t\t\t\tcoins: 0,\n\t\t\t\t\t\t\thealth : 5,\n\t\t\t\t\t\t\tmax_health : 3,\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tgame.handle_collision = (cause, target) => {\n\t\t\tlet color = game.vars.main_c, update = 0 ,\n\t\t\t\tlog;\n\n\t\t\tif (target.type == \"wall\") {\n\t\t\t\tlog = \"hit wall, \"\n\t\t\t\ttarget.health -= 1;\n\t\t\t\tif (!target.health) {\n\t\t\t\t\tgame.squares.splice(game.squares.indexOf(target), 1);\n\t\t\t\t\tlog += \"destroyed\"\n\t\t\t\t}\n\t\t\t\telse log += \"health: \" + target.health\n\t\t\t}\n\t\t\telse if (target.type == \"enemy\") {\n\t\t\t\tlog = \"hit enemy, \"\n\t\t\t\ttarget.health -= 1;\n\t\t\t\tif (!target.health) {\n\t\t\t\t\tgame.enemies.splice(game.enemies.indexOf(target), 1);\n\t\t\t\t\tcause.coins += 2;\n\t\t\t\t\tupdate = 1;\n\t\t\t\t\tlog += \"(got them +2)\"\n\t\t\t\t\tcolor = game.vars.ps_c;\n\t\t\t\t}\n\t\t\t\telse log += \", health: \" + target.health;\n\t\t\t}\n\t\t\telse if (target.type == \"player\") {\n\t\t\t\tlog = \"player got hit \"\n\t\t\t\tupdate = 2;\n\t\t\t\ttarget.health -= 1;\n\t\t\t\tif (!target.health) {\n\t\t\t\t\tgame.players[game.players.indexOf(target)].state = 0;\n\t\t\t\t\tcurrent_players--;\n\t\t\t\t\tlog += \" and destroyed \"\n\t\t\t\t\tif (!current_players) {\n\t\t\t\t\t\tlog += \", ending game\"\n\t\t\t\t\t\tgame_state = 2;\n\t\t\t\t\t\t//props.setState(game_state);\n\t\t\t\t\t}\n\t\t\t\t\tprops.setPlayers(current_players);\n\t\t\t\t\tcolor = \"red\";\n\t\t\t\t}\n\t\t\t\telse log += target.health + \" more\"\n\t\t\t} else if (target.type == \"coin\") {\n\t\t\t\tlog = \"got coin \"\n\t\t\t\tgame.coins.splice(game.coins.indexOf(target), 1);\n\t\t\t\tcause.coins += 1;\n\t\t\t\tcolor = game.vars.coins_c;\n\t\t\t\tupdate = 1;\n\t\t\t\tlog += \"+1\"\n\t\t\t\tif (game.coins.length == 0) {\n\t\t\t\t\tgame_state = 2;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (update) {\n\t\t\t\tif (update == 1) {\n\t\t\t\t\tif (cause.mode == 0) { score.p_1 = cause.coins; props.p_1(cause.coins); }\n\t\t\t\t\telse { props.p_2(cause.coins); score.p_2 = cause.coins; }\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (target.mode == 0) { props.p_1(target.coins); score.p_1 = target.coins; }\n\t\t\t\t\telse { props.p_2(target.coins); score.p_2 = target.coins; }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet logs = props.log;\n\t\t\tlogs.push(\n\t\t\t\t<p style={{ color: color }}>\n\t\t\t\t{log}\n\t\t\t\t</p>\n\t\t\t);\n\n\t\t\tprops.setLogs(logs);\n\t\t};\n\n\t\tgame.collided = (x, y, w, h, s, ray) => {\n\t\t\tif (x < 0 || x > game.c_wid - w || y < 0 || y > game.c_hei - h) return 4;\n\n\t\t\ttry {\n\t\t\t\tgame.squares.forEach((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.x <= x + w &&\n\t\t\t\t\t\te.x + game.vars.sq_w >= x &&\n\t\t\t\t\t\te.y <= y + h &&\n\t\t\t\t\t\te.y + game.vars.sq_h >= y\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (s.type == \"player\" && ray) game.handle_collision(s, e);\n\t\t\t\t\t\tthrow 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ray || s.type == \"enemy\") {\n\t\t\t\t\tgame.enemies.forEach((e) => {\n\t\t\t\t\t\tlet new_w = game.vars.enemies_radius * 2,\n\t\t\t\t\t\t\tnew_x = e.x - game.vars.enemies_radius,\n\t\t\t\t\t\t\tnew_y = e.y - game.vars.enemies_radius;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te != s &&\n\t\t\t\t\t\t\tnew_x < x + w &&\n\t\t\t\t\t\t\tnew_x + new_w > x &&\n\t\t\t\t\t\t\tnew_y < y + h &&\n\t\t\t\t\t\t\tnew_y + new_w > y\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (s.type == \"player\") game.handle_collision(s, e);\n\t\t\t\t\t\t\tthrow 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (s.type == \"player\") {\n\t\t\t\t\tgame.coins.forEach((e) => {\n\t\t\t\t\t\tlet new_w = game.vars.coins_radius * 2,\n\t\t\t\t\t\t\tnew_x = e.x - game.vars.coins_radius,\n\t\t\t\t\t\t\tnew_y = e.y - game.vars.coins_radius;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te != s &&\n\t\t\t\t\t\t\tnew_x < x + w &&\n\t\t\t\t\t\t\tnew_x + new_w > x &&\n\t\t\t\t\t\t\tnew_y < y + h &&\n\t\t\t\t\t\t\tnew_y + new_w > y\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tgame.handle_collision(s, e);\n\t\t\t\t\t\t\tthrow 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tgame.players.forEach((e) => {\n\t\t\t\t\tif (e.state) {\n\t\t\t\t\t\tlet new_w = game.vars.players_radius * 2,\n\t\t\t\t\t\t\tnew_x = e.x - game.vars.players_radius,\n\t\t\t\t\t\t\tnew_y = e.y - game.vars.players_radius;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te != s &&\n\t\t\t\t\t\t\tnew_x < x + w &&\n\t\t\t\t\t\t\tnew_x + new_w > x &&\n\t\t\t\t\t\t\tnew_y < y + h &&\n\t\t\t\t\t\t\tnew_y + new_w > y\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (s.type == \"enemy\" || (s.type == \"player\" && ray))\n\t\t\t\t\t\t\t\tgame.handle_collision(s, e);\n\t\t\t\t\t\t\tthrow 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (c) {\n\t\t\t\treturn c;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tgame.continue = () => {\n\t\t\t//  coins\n\t\t\tctx.fillStyle = game.vars.coins_c;\n\t\t\tgame.coins.forEach((e) => {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(e.x, e.y, game.vars.coins_radius, 0, 2 * Math.PI);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t\t//  squares\n\t\t\tgame.squares.forEach((e) => {\n\t\t\t\tctx.fillStyle = game.vars.main_c_rgb + ((1-(1/e.health))+0.2) + \")\";\n\t\t\t\tctx.fillRect(e.x, e.y, game.vars.sq_w, game.vars.sq_h);\n\t\t\t});\n\t\t\t//  enemies\n\t\t\tctx.strokeStyle = game.vars.main_c;\n\t\t\tgame.enemies.forEach((e) => {\n\t\t\t\tctx.fillStyle = game.vars.main_c\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(e.x, e.y, game.vars.enemies_radius, e.max_health - e.health, 2 * Math.PI);\n\t\t\t\tif (e.mode) ctx.fill();\n\t\t\t\telse {\n\t\t\t\t\tctx.fillStyle = game.vars.main_b;\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t\t//  enemy direction\n\t\t\t\tlet ray_x =\n\t\t\t\t\te.x +\n\t\t\t\t\t(e.dir_x < 0 ? -(game.vars.enemies_radius / 3) : e.dir_x > 0 ? game.vars.enemies_radius / 3 : 0),\n\t\t\t\t\tray_y =\n\t\t\t\t\te.y +\n\t\t\t\t\t(e.dir_y < 0 ? -(game.vars.enemies_radius / 3) : e.dir_y > 0 ? game.vars.enemies_radius / 3 : 0),\n\t\t\t\t\tcatcher = 0;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(ray_x, ray_y, game.vars.enemies_radius / 3, 0, 2 * Math.PI);\n\t\t\t\tctx.fillStyle = e.mode ? game.vars.main_b : game.vars.main_c;\n\t\t\t\tctx.fill();\n\t\t\t\t// enemy ray\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(ray_x, ray_y);\n\t\t\t\twhile (\n\t\t\t\t\tcatcher < game.c_wid &&\n\t\t\t\t\tgame.collided(ray_x, ray_y, 1, 1, e, true) == 0\n\t\t\t\t) {\n\t\t\t\t\tray_x += 2 * e.dir_x;\n\t\t\t\t\tray_y += 2 * e.dir_y;\n\t\t\t\t\tcatcher++;\n\t\t\t\t}\n\t\t\t\tctx.lineTo(ray_x, ray_y);\n\t\t\t\tctx.stroke();\n\t\t\t});\n\t\t\t//  players\n\t\t\tctx.strokeStyle = game.vars.ps_c;\n\t\t\tgame.players.forEach((e) => {\n\t\t\t\tif (e.state) {\n\t\t\t\t\tlet x_ray =\n\t\t\t\t\t\te.x +\n\t\t\t\t\t\t(e.dir_x < 0 ? -(game.vars.players_radius / 3) : e.dir_x > 0 ? game.vars.players_radius / 3 : 0),\n\t\t\t\t\t\ty_ray =\n\t\t\t\t\t\te.y +\n\t\t\t\t\t\t(e.dir_y < 0 ? -(game.vars.players_radius / 3) : e.dir_y > 0 ? game.vars.players_radius / 3 : 0),\n\t\t\t\t\t\tcatcher = 0;\n\t\t\t\t\t//  player itself\n\t\t\t\t\tctx.fillStyle = game.vars.ps_c;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(e.x, e.y, game.vars.players_radius, e.max_health - e.health, 2 * Math.PI);\n\t\t\t\t\te.mode ? ctx.fill() : ctx.stroke();\n\t\t\t\t\t//  player direction\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x_ray, y_ray, game.vars.players_radius / 3, 0, 2 * Math.PI);\n\t\t\t\t\tctx.fillStyle = (e.mode ? game.vars.main_b : game.vars.ps_c);\n\n\t\t\t\t\tctx.fill();\n\t\t\t\t\t//  player shoot\n\t\t\t\t\tif (e.shooting > 0) {\n\t\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(x_ray, y_ray);\n\t\t\t\t\t\twhile (\n\t\t\t\t\t\t\tcatcher < game.c_wid &&\n\t\t\t\t\t\t\tgame.collided(x_ray, y_ray, 1, 1, e, e.shooting == 1) == 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tx_ray += (2 * e.dir_x);\n\t\t\t\t\t\t\ty_ray += (2 * e.dir_y);\n\t\t\t\t\t\t\tcatcher++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tctx.lineTo(x_ray, y_ray);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\te.shooting += 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.shooting > 2)\n\t\t\t\t\t\te.shooting = 0;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tgame.moveEnemies = () => {\n\t\t\tif (game.vars.enemies_c_f < game.vars.enemies_MpF)\n\t\t\t\tgame.vars.enemies_c_f++;\n\t\t\telse {\n\t\t\t\tlet new_x, new_y;\n\t\t\t\tgame.vars.enemies_c_f = 0;\n\t\t\t\tgame.enemies.forEach((e) => {\n\t\t\t\t\tnew_x = e.x + 5 * e.dir_x;\n\t\t\t\t\tnew_y = e.y + 5 * e.dir_y;\n\t\t\t\t\tif (\n\t\t\t\t\t\tgame.collided(\n\t\t\t\t\t\t\tnew_x - game.vars.enemies_radius,\n\t\t\t\t\t\t\tnew_y - game.vars.enemies_radius,\n\t\t\t\t\t\t\tgame.vars.enemies_radius * 2,\n\t\t\t\t\t\t\tgame.vars.enemies_radius * 2,\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t) != 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tlet new_dir_x, new_dir_y;\n\t\t\t\t\t\tnew_dir_x = rand_num(-1, 1);\n\t\t\t\t\t\twhile ((new_dir_y = rand_num(-1, 1)) == e.dir_y);\n\t\t\t\t\t\te.dir_x = new_dir_x;\n\t\t\t\t\t\te.dir_y = !new_dir_y && !new_dir_x ? (rand_num(0, 1) ? -1 : 1) : new_dir_y;\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.x = new_x;\n\t\t\t\t\t\te.y = new_y;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tgame.movePlayer = code => {\n\t\t\tlet p_index = 20,new_x, new_y, p_radius, p;\n\t\t\tif (game.players.length > 0 && game.players[0].state && (code <= 40 && code >= 37 || code == 13)) {\n\t\t\t\tp = 0;\n\t\t\t\tif (code == 13) {\n\t\t\t\t\tgame.players[p].shooting = 1;\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tgame.players[p].dir_x = code == 37 ? -1 : code == 39 ? 1 : 0;\n\t\t\t\tgame.players[p].dir_y = code == 38 ? -1 : code == 40 ? 1 : 0;\n\t\t\t}\n\t\t\telse return;\n\t\t\tp_radius = game.vars.players_radius;\n\t\t\tnew_x = game.players[p].x + p_index * game.players[p].dir_x;\n\t\t\tnew_y = game.players[p].y + p_index * game.players[p].dir_y;\n\t\t\twhile (\n\t\t\t\tp_index >= 0 &&\n\t\t\t\tgame.collided(\n\t\t\t\t\tnew_x - p_radius,\n\t\t\t\t\tnew_y - p_radius,\n\t\t\t\t\tp_radius * 2,\n\t\t\t\t\tp_radius * 2,\n\t\t\t\t\tgame.players[p],\n\t\t\t\t\tfalse\n\t\t\t\t) != 0\n\t\t\t) {\n\t\t\t\tnew_x = game.players[p].x + p_index * game.players[p].dir_x;\n\t\t\t\tnew_y = game.players[p].y + p_index * game.players[p].dir_y;\n\t\t\t\tp_index -= 2;\n\t\t\t}\n\t\t\tgame.players[p].x = new_x;\n\t\t\tgame.players[p].y = new_y;\n\t\t}\n\n\t\tgame.send_updates = up_type => {\n\t\t\tprops.send_update(up_type, JSON.stringify({\n\t\t\t\tw: game.c_wid,\n\t\t\t\th: game.c_hei,\n\t\t\t\tcurrent_players: current_players,\n\t\t\t\tplayers: game.players,\n\t\t\t\tenemies: game.enemies,\n\t\t\t\tcoins: game.coins,\n\t\t\t\tsquares: game.squares,\n\t\t\t\tlog: props.log,\n\t\t\t\tp1_score: score.p_1,\n\t\t\t\tp2_score: score.p_2,\n\t\t\t\tstate: null\n\t\t\t}), 'guest')\n\t\t}\n\n\t\tgame.receive_updates = () => {\n\t\t\tif (game_update != null && game_update == null) {\n\t\t\t\tgame.players[1] = game_update.player;\n\t\t\t\tgame_update = null;\n\t\t\t}\n\t\t}\n\n\t\tgame.send_state = () => {\n\t\t\tprops.send_update(\"game state\", JSON.stringify({\n\t\t\t\tstate : game_state\n\t\t\t}), 'guest')\n\t\t}\n\n\t\tgame.receive_state = () => {\n\t\t\tif (game_update != null && game_update.state != null)\n\t\t\t\t{ game_state = game_update.state; game_update = null; }\n\t\t}\n\n\t\tgame.pause = () => {\n\t\t\tctx.fillStyle = game.vars.main_c;\n\t\t\tlet   pause = \"PAUSE\";\n\t\t\tctx.fillText(pause, game.c_wid/2 - pause.length , game.c_hei / 2);\n\t\t};\n\n\t\tgame.end = () => {\n\t\t\tctx.fillStyle = game.vars.main_c;\n\t\t\tlet   over = \"GAME OVER\",\n\t\t\twinner;\n\t\t\tif (game.players.length > 0)\n\t\t\t\twinner = game.players[0].coins > game.players[1].coins ? \"PLAYER 1\"\n\t\t\t\t: (game.players[0].coins < game.players[1].coins ? \"PLAYER 2\" : \"NO ONE\");\n\t\t\telse\twinner = \"NO ONE\";\n\t\t\twinner += \" WON\";\n\t\t\tctx.fillText(over, game.c_wid/2 - (over.length/2)*10, game.c_hei/2);\n\t\t\tctx.fillText(winner, game.c_wid/2 - (winner.length/2)*10, (game.c_hei/2) + 30);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tgame.squares = new Array();\n\t\t\t\tgame.enemies = new Array();\n\t\t\t\tgame.coins = new Array();\n\t\t\t\tgame.players = new Array();\n\t\t\t\tgame_state = -1;\n\t\t\t\tprops.toggle();\n\t\t\t}, 3000)\n\t\t};\n\n\t\twindow.onresize = a => {\n\t\t\tgame.c_wid = canvas.width = wrapper.offsetWidth;\n\t\t\tgame.c_hei = canvas.height = window.innerHeight / 2;\n\t\t\tcanvas.style.width = game.c_wid + \"px\";\n\t\t\tcanvas.style.height = game.c_hei + \"px\";\n\t\t\tgame.vars.sq_w = game.c_hei / 10;\n\t\t\tgame.vars.sq_h = game.c_hei / 10;\n\t\t};\n\n\t\tgame.draw = () => {\n\t\t\tctx.clearRect(0, 0, game.c_wid, game.c_hei);\n\t\t\tctx.font = \"20px monospace\";\n\t\t\tctx.lineWidth = \"2\";\n\t\t\tlet\tupdate_type = \"game started\";\n\n\t\t\tgame.receive_updates();\n\t\t\tgame.receive_state();\n\t\t\tswitch (game_state) {\n\t\t\t\tcase 0:\n\t\t\t\t\tgame.initiate();\n\t\t\t\t\twindow.onkeydown = (e) => game.movePlayer(e.keyCode);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tgame.pause();\n\t\t\t\t\tupdate_type = \"game pause\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tgame.end();\n\t\t\t\t\tupdate_type = \"game over\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase -1:\n\t\t\t\t\tupdate_type = \"you just found a host\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tgame.moveEnemies();\n\t\t\t\t\tgame.continue();\n\t\t\t}\n\t\t\tgame.send_updates(update_type);\n\t\t\tif (!game_state) {\n\t\t\t\tgame_state = 3;\n\t\t\t}\n\t\t\t//game.send_state();\n\t\t\tprops.setState(game_state);\n\t\t\trequestAnimationFrame(game.draw);\n\t\t};\n\t\trequestAnimationFrame(game.draw);\n\t}, []);\n\tcurrent_players = props.players;\n\tgame_state = props.state;\n\tgame_update = JSON.parse(props.game_update);\n\treturn <canvas id=\"canvas\" className=\"off\" >something is wrong</canvas>;\n};\n\nexport default Game;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}